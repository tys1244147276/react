{"version":3,"sources":["pages/ShopCar.js"],"names":["Checkbox","CheckboxItem","connect","state","buycar","dispatch","change","opts","type","types","payload","remove","clear","props","check1","useRef","useState","bl","setBl","className","onClick","window","history","go","src","fanh","id","cd_1","length","map","item","index","key","checked","flag","onChange","arr","forEach","val","_id","setTimeout","localStorage","setItem","JSON","stringify","a","some","baseUrl","icon","des","jia","num","value","number","readOnly","ref","current","result","slice","toFixed","count","sum","lala"],"mappings":"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","file":"static/js/4.fbf07a18.chunk.js","sourcesContent":["import React,{useState,useRef} from 'react'\r\nimport './ShopCar.css'\r\nimport * as types from '../store/types'\r\nimport {connect} from 'react-redux'\r\nimport fanh from \"../assets/images/web/fanh.png\"\r\nimport cd_1 from \"../assets/images/web/cd_1.png\"\r\nimport { Checkbox } from 'antd-mobile';\r\n\r\nconst CheckboxItem = Checkbox.CheckboxItem;\r\n\r\nconst ShopCar =(props)=>{\r\n    const check1=useRef('lala')\r\n    \r\n    const [bl,setBl] = useState(false)\r\n\r\n    const lala=(buycar)=>{\r\n        let sum = 0;\r\n        buycar.forEach(item=>{\r\n            if(item.flag){\r\n                sum += item.number\r\n            }\r\n        })\r\n        return sum;\r\n    }\r\n    const count=(buycar)=>{\r\n        let result = 0;\r\n\t\t\tbuycar.forEach(item=>{\r\n\t\t\t\tif(item.flag){\r\n\t\t\t\t\tresult += item.jia.slice(1) * item.number\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn result.toFixed(1);\r\n    }\r\n    \r\n        let {buycar} = props;\r\n        return (\r\n            <div className='shopcar'>\r\n                <div className=\"toub_beij toub_beij_zy\">\r\n                    <div className=\"zhongj_k zhongj_k_z\">\r\n                        <div className=\"jiu_feo\">\r\n                            <div className=\"logo_k logo_k_fanh\"><a  onClick={()=>window.history.go(-1)}><img className=\"fanh_ann\" src={fanh}/></a></div>\r\n                                    <div className=\"zhongjain_daoh\">\r\n                                        <ul>\r\n                                            <li><a className=\"zyyge\">购物车</a></li>  \r\n                                        </ul>\r\n                                    </div>\r\n                        </div>\r\n                        <div className=\"dengl\">\r\n                            <div className=\"caid_img\" id=\"zhu_caid\"><img src={cd_1} /></div>\r\n                            \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {buycar.length===0 ?\r\n                    (\r\n                        <div>\r\n                            <p>您还未购买商品,前往首页选购商品</p>\r\n                        </div>\r\n                    ) :\r\n                    (\r\n                        <div>\r\n                            <div className=\"gouwuc_kk\">\r\n                                <ul>\r\n                                    <li>\r\n                                        {\r\n                                            buycar.map((item,index)=>(\r\n                                                <div key={index}\r\n                                                    className=\"diannao_shanp\"\r\n                                                >\r\n                                                    <i className='i1'>\r\n                                                        <input type='checkbox'  checked={item.flag} onChange={()=>{\r\n                                                   \r\n                                                            let arr = [...buycar]\r\n                                                            arr.forEach(val=>{\r\n                                                                if(val._id==item._id){\r\n                                                                    val.flag=!val.flag\r\n                                                                }\r\n                                                            })\r\n                                                            props.clear(arr)\r\n                                                            setTimeout(()=>localStorage.setItem('buycar_item',JSON.stringify(arr)),0)\r\n                                                            \r\n                                                            \r\n                                                            let a = buycar.some(val=>{\r\n                                                                if(!val.flag){\r\n                                                                    return true\r\n                                                                }\r\n                                                            })\r\n                                                            if(a){\r\n                                                                setBl(false)\r\n                                                            }else{\r\n                                                                setBl(true)\r\n                                                            }\r\n                                                    }}/></i>\r\n                                                    <a ><h1><img src={`${baseUrl}${item.icon}`}/></h1></a>\r\n                                                    <div className=\"you\">\r\n                                                        <a ><p className=\"px24 bt\">{item.des}</p></a>\r\n                                                        <p className=\"xh\">特惠装</p>\r\n                                                        <div className=\"youjfy\">\r\n                                                            <div className=\"goum_sl\">\r\n                                                                <p className=\"px26 jiaq\">{item.jia}</p>\r\n                                                                <div className=\"counter_box\">\r\n                                                                    <i className=\"jian\" onClick={()=>{\r\n                                                                        props.change({_id:item._id,num:-1})\r\n                                                                        setTimeout(()=>localStorage.setItem('buycar_item',JSON.stringify(buycar)),0)\r\n                                                                }}>-</i>\r\n                                                                    <input type=\"text\" value={item.number} readOnly />\r\n                                                                    <i className=\"jia\" onClick={()=>{\r\n                                                                        props.change({_id:item._id,num:1})\r\n                                                                        setTimeout(()=>localStorage.setItem('buycar_item',JSON.stringify(buycar)),0)\r\n                                                                }}>+</i>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"bianj\">\r\n                                                            <a  className=\"ayou\" onClick={()=>{\r\n                                                                props.remove({_id:item._id});\r\n                                                        }}> <p><i className=\"sc\"></i>删除</p></a>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))\r\n                                        }\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                            <div className='dib_daoh_b'>\r\n                                <div className=\"gouwuc_sp\">\r\n                                    <div className=\"zuo\">\r\n                                        <i className=\"i1\"><p>\r\n                                            <input type='checkbox'  checked={bl} ref={check1} onChange={()=>{\r\n                                                if(check1.current.checked){\r\n                                                    buycar.forEach(item=>{\r\n                                                        item.flag=true\r\n                                                    })\r\n                                                    setBl(!bl)\r\n                                                    \r\n                                                }else{\r\n                                                    buycar.forEach(item=>{\r\n                                                        item.flag=false\r\n                                                    })\r\n                                                    setBl(!bl)\r\n                                                \r\n                                                }\r\n                                            \r\n                                           }}/></p></i> \r\n                                    </div>\r\n                                    \r\n                                    <div className=\"zhong\">\r\n                                        <p>\r\n                                        <a  onClick={\r\n                                            ()=>{\r\n                                                props.clear([])\r\n                                                setTimeout(localStorage.setItem('buycar_item',JSON.stringify([])),0)\r\n                                            }\r\n                                        } className='enen'>清空购物车</a>\r\n\r\n                                            总计：<em>￥{count(buycar)}</em></p></div>\r\n                                    <div className=\"you\">\r\n                                        <div className=\"goum\">\r\n                                            <a >去结算<em>{lala(buycar)}</em></a>  \r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                }\r\n\r\n                \r\n\r\n                </div>\r\n        )\r\n    }\r\n\r\n\r\nconst mapStateToProps = state =>({\r\n    buycar:state.buycar\r\n})\r\n\r\nconst mapDispatchToProps = dispatch =>({\r\n\r\n    change:(opts)=>dispatch({\r\n        type:types.CHANGE_ITEM,\r\n        payload:opts\r\n    }),\r\n    remove:(opts)=>dispatch({\r\n        type:types.REMOVE_ITEM,\r\n        payload:opts\r\n    }),\r\n    clear:(opts)=>dispatch({\r\n        type:types.CLEAR_BUYCAR,\r\n        payload:opts\r\n    })\r\n})\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(ShopCar)"],"sourceRoot":""}